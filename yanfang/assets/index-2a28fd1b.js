import{o as e,c as t,a,n,r as o,b as s,d as i,t as l,e as r,f as c,g as u,h as d,i as v,j as f,k as m,w as p,l as g,m as b,p as y,v as h,T as k,q as C,s as x,F as $,u as S,x as B,y as N,z as I,K as P,A as _,B as w,C as j}from"./index-330ef47a.js";import{l as O,a as A,_ as z}from"./_plugin-vue_export-helper-b7137c09.js";import{u as T}from"./room-987915ac.js";import{q as L}from"./question-9f8f4f55.js";import{u as V}from"./useParse-33def060.js";import{s as E}from"./index-73d29bc9.js";import{c as R,o as q,f as F,w as M,a as H,p as U,b as G,s as D,t as K,d as Y,e as X,u as J,g as Q,i as W,h as Z,n as ee,j as te,k as ae,_ as ne,l as oe,m as se}from"./index-2de332e8.js";import"./index-6a22476b.js";const ie={color:String,textColor:String,title:String,titlePosition:{type:String,default:"left"},elevation:{type:[Boolean,String,Number],default:!0},round:Boolean,image:String,imageLinearGradient:String,safeAreaTop:Boolean},{name:le,n:re,classes:ce}=R("app-bar");const ue=c({name:le,props:ie,setup(e,{slots:t}){const a=u(),n=u(),o=d((()=>{const{image:t,color:a,textColor:n,imageLinearGradient:o}=e;if(null!=t){return{"background-image":`${o?`linear-gradient(${o}), `:""}url(${t})`,"background-position":"center center","background-size":"cover"}}return{background:a,color:n}}));function s(){a.value=t.left?0:void 0,n.value=t.right?0:void 0}return q(s),v(s),{rootStyles:o,paddingLeft:a,paddingRight:n,n:re,classes:ce,formatElevation:F}}});ue.render=function(c,u){return e(),t("div",{class:n(c.classes(c.n(),c.n("$--box"),[c.safeAreaTop,c.n("--safe-area-top")],[c.round,c.n("--round")],c.formatElevation(c.elevation,3))),style:s(c.rootStyles)},[a("div",{class:n(c.n("toolbar"))},[a("div",{class:n(c.n("left"))},[o(c.$slots,"left"),"left"===c.titlePosition?(e(),t("div",{key:0,class:n(c.n("title")),style:s({paddingLeft:c.paddingLeft})},[o(c.$slots,"default",{},(()=>[i(l(c.title),1)]))],6)):r("v-if",!0)],2),"center"===c.titlePosition?(e(),t("div",{key:0,class:n(c.n("title"))},[o(c.$slots,"default",{},(()=>[i(l(c.title),1)]))],2)):r("v-if",!0),a("div",{class:n(c.n("right"))},["right"===c.titlePosition?(e(),t("div",{key:0,class:n(c.n("title")),style:s({paddingRight:c.paddingRight})},[o(c.$slots,"default",{},(()=>[i(l(c.title),1)]))],6)):r("v-if",!0),o(c.$slots,"right")],2)],2),o(c.$slots,"content")],6)};var de=ue;M(de),H(de,ie);const ve=de,fe={type:{type:String,default:"default"},position:{type:String,default:"right-top"},hidden:Boolean,value:{type:[String,Number],default:0},maxValue:[String,Number],dot:Boolean,icon:U(G,"name"),namespace:U(G,"namespace"),color:String,offsetX:{type:[String,Number],default:0},offsetY:{type:[String,Number],default:0}};var me=Object.defineProperty,pe=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,ye=(e,t,a)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,he=(e,t)=>{for(var a in t||(t={}))ge.call(t,a)&&ye(e,a,t[a]);if(pe)for(var a of pe(t))be.call(t,a)&&ye(e,a,t[a]);return e};const{name:ke,n:Ce,classes:xe}=R("badge"),$e={key:0};const Se=c({name:ke,components:{VarIcon:D},inheritAttrs:!1,props:fe,setup:e=>({value:d((()=>{const{value:t,maxValue:a}=e;return null!=t&&null!=a&&K(t)>K(a)?`${a}+`:t})),offsetStyle:d((()=>({"--badge-offset-y":Y(e.offsetY),"--badge-offset-x":Y(e.offsetX)}))),n:Ce,classes:xe})});Se.render=function(s,i){const c=f("var-icon");return e(),t("div",{class:n(s.classes(s.n(),s.n("$--box")))},[o(s.$slots,"default"),m(k,{name:s.n("$-badge-fade"),persisted:""},{default:p((()=>[g(a("span",b({class:s.classes(s.n("content"),s.n(`--${s.type}`),[s.$slots.default,s.n(`--${s.position}`),s.n("--offset")],[s.dot,s.n("--dot")],[s.icon,s.n("--icon")]),style:he({background:s.color},s.offsetStyle)},s.$attrs),[s.icon?(e(),y(c,{key:0,class:n(s.n("icon")),"var-badge-cover":"",name:s.icon,namespace:s.namespace},null,8,["class","name","namespace"])):r("v-if",!0),o(s.$slots,"value",{},(()=>[s.icon||s.dot?r("v-if",!0):(e(),t("span",$e,l(s.value),1))]))],16),[[h,!s.hidden]])])),_:3},8,["name"])],2)};var Be=Se;M(Be),H(Be,fe);var Ne=Be;const Ie={active:{type:[Number,String],default:0},zIndex:{type:[Number,String],default:1},fixed:Boolean,border:Boolean,safeArea:Boolean,activeColor:String,inactiveColor:String,fabProps:Object,onChange:X(),onBeforeChange:X(),onFabClick:X(),"onUpdate:active":X()},Pe=Symbol("BOTTOM_NAVIGATION_BIND_BOTTOM_NAVIGATION_ITEM_KEY");var _e=Object.defineProperty,we=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Ae=(e,t,a)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ze=(e,t)=>{for(var a in t||(t={}))je.call(t,a)&&Ae(e,a,t[a]);if(we)for(var a of we(t))Oe.call(t,a)&&Ae(e,a,t[a]);return e};const{name:Te,n:Le,classes:Ve}=R("bottom-navigation"),{n:Ee}=R("bottom-navigation-item"),Re=Ee("--right-half-space"),qe=Ee("--left-half-space"),Fe=Ee("--right-space"),Me={type:"primary"};const He=c({name:Te,components:{VarButton:Q},props:Ie,setup(e,{slots:t}){const a=u(null),n=d((()=>e.active)),o=d((()=>e.activeColor)),s=d((()=>e.inactiveColor)),i=u({}),{length:l,bottomNavigationItems:r,bindBottomNavigationItem:c}=function(){const{childProviders:e,length:t,bindChildren:a}=J(Pe);return{length:t,bottomNavigationItems:e,bindBottomNavigationItem:a}}();function f(t){Z(e["onUpdate:active"],t),Z(e.onChange,t)}function m(e){const t=p(),a=t.length,n=e%2==0;t.forEach(((e,t)=>{!function(e,t,a,n){const o=a===n-1;if(!e&&o)return void t.classList.add(Fe);const s=a===n/2-1,i=a===n/2;s?t.classList.add(Re):i&&t.classList.add(qe)}(n,e,t,a)}))}function p(){return Array.from(a.value.querySelectorAll(`.${Ee()}`))}return c({active:n,activeColor:o,inactiveColor:s,onToggle:function(t){if(n.value===t)return;e.onBeforeChange?function(t){const a=ee(Z(e.onBeforeChange,t));Promise.all(a).then((e=>{e.every(Boolean)&&f(t)}))}(t):f(t)}}),C((()=>l.value),(function(){if(0===l.value||r.find((({name:e})=>n.value===e.value))||r.find((({index:e})=>n.value===e.value)))return;!function(){if(!W(n.value))return;n.value<0?Z(e["onUpdate:active"],0):n.value>l.value-1&&Z(e["onUpdate:active"],l.value-1)}()})),C((()=>e.fabProps),(e=>{i.value=ze(ze({},Me),e)}),{immediate:!0,deep:!0}),q((()=>{t.fab&&m(l.value)})),v((()=>{p().forEach((e=>{e.classList.remove(Re,qe,Fe)})),t.fab&&m(l.value)})),{length:l,bottomNavigationDom:a,fabProps:i,n:Le,classes:Ve,handleFabClick:function(){Z(e.onFabClick)}}}});He.render=function(a,i){const l=f("var-button");return e(),t("div",{class:n(a.classes(a.n(),a.n("$--box"),[a.fixed,a.n("--fixed")],[a.border,a.n("--border")],[a.safeArea,a.n("--safe-area")])),ref:"bottomNavigationDom",style:s(`z-index:${a.zIndex}`)},[o(a.$slots,"default"),a.$slots.fab?(e(),y(l,b({key:0,class:a.classes(a.n("fab"),[a.length%2,a.n("--fab-right"),a.n("--fab-center")]),"var-bottom-navigation__fab":"",onClick:a.handleFabClick},a.fabProps,{round:""}),{default:p((()=>[o(a.$slots,"fab")])),_:3},16,["class","onClick"])):r("v-if",!0)],6)};var Ue=He;M(Ue),H(Ue,Ie);const Ge=Ue,De={name:String,label:String,icon:U(G,"name"),namespace:U(G,"namespace"),badge:{type:[Boolean,Object],default:!1},onClick:X()};function Ke(){const{parentProvider:e,index:t,bindParent:a}=te(Pe);return a||function(e,t){throw Error(`Varlet [${e}]: ${t}`)}("BottomNavigationItem","<var-bottom-navigation-item/> must in <var-bottom-navigation/>"),{index:t,bottomNavigation:e,bindBottomNavigation:a}}const{name:Ye,n:Xe,classes:Je}=R("bottom-navigation-item"),Qe={type:"danger",dot:!0};const We=c({name:Ye,components:{VarBadge:Ne,VarIcon:D},directives:{Ripple:ae},props:De,setup(e){const t=d((()=>e.name)),a=d((()=>e.badge)),n=u({}),{index:o,bottomNavigation:s,bindBottomNavigation:i}=Ke(),{active:l,activeColor:r,inactiveColor:c}=s;return i({name:t,index:o}),C((()=>a.value),(e=>{n.value=!0===e?Qe:a.value}),{immediate:!0}),{index:o,active:l,badge:a,badgeProps:n,n:Xe,classes:Je,computeColorStyle:function(){return l.value===t.value||l.value===o.value?r.value:c.value},handleClick:function(){var a;const n=null!=(a=t.value)?a:o.value;Z(e.onClick,n),Z(s.onToggle,n)}}}});We.render=function(c,u){const d=f("var-icon"),v=f("var-badge"),m=x("ripple");return g((e(),t("button",{class:n(c.classes(c.n(),c.n("$--box"),[c.active===c.index||c.active===c.name,c.n("--active")])),style:s({color:c.computeColorStyle()}),onClick:u[0]||(u[0]=(...e)=>c.handleClick&&c.handleClick(...e))},[c.icon&&!c.$slots.icon?(e(),y(d,{key:0,name:c.icon,namespace:c.namespace,class:n(c.n("icon")),"var-bottom-navigation-item-cover":""},null,8,["name","namespace","class"])):r("v-if",!0),o(c.$slots,"icon",{active:c.active===c.index||c.active===c.name}),c.badge?(e(),y(v,b({key:1},c.badgeProps,{class:c.n("badge"),"var-bottom-navigation-item-cover":""}),null,16,["class"])):r("v-if",!0),a("span",{class:n(c.n("label"))},[c.$slots.default?r("v-if",!0):(e(),t($,{key:0},[i(l(c.label),1)],64)),o(c.$slots,"default")],2)],6)),[[m]])};var Ze=We;M(Ze),H(Ze,De);const et=Ze,tt=A("horizontal"),at=[a("path",{d:"M977.455 124.121H46.545C21.721 124.121 0 102.4 0 77.576S21.721 31.03 46.545 31.03h930.91c24.824 0 46.545 21.722 46.545 46.546s-21.721 46.545-46.545 46.545zm0 868.849H46.545C21.721 992.97 0 971.248 0 946.424s21.721-46.545 46.545-46.545h930.91c24.824 0 46.545 21.721 46.545 46.545s-21.721 46.546-46.545 46.546zm0-434.425H356.848c-24.824 0-46.545-21.72-46.545-46.545s21.721-46.545 46.545-46.545h620.607c24.824 0 46.545 21.72 46.545 46.545s-21.721 46.545-46.545 46.545z",fill:"currentColor","fill-opacity":"0.9"},null,-1)];const nt=O(tt,[["render",function(a,o,i,l,r,c){return e(),t("svg",{class:n(a.classes),style:s(a.style),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1090 1024",role:"presentation"},at,6)}]]),ot=A("my"),st=[a("path",{d:"M512 813.949c-225.805 0-406.974-183.795-406.974-406.975S286.195 0 512 0s406.974 181.17 406.974 406.974S735.18 813.95 512 813.95zm0-735.18c-181.17 0-328.205 147.036-328.205 328.205S330.83 735.18 512 735.18s328.205-147.035 328.205-328.205S693.17 78.77 512 78.77zm202.174 939.98c-21.005 0-39.384-18.38-39.384-39.385 0-89.272-73.518-162.79-162.79-162.79-89.272 0-162.79 73.518-162.79 162.79 0 21.005-18.38 39.385-39.384 39.385s-39.385-18.38-39.385-39.385c0-133.908 107.651-241.559 241.559-241.559s241.559 107.651 241.559 241.56c0 21.004-15.754 39.384-39.385 39.384zM512 525.129c-39.385 0-78.77-13.129-105.026-36.76-15.753-13.128-18.38-39.384-2.625-55.138 13.128-15.754 39.384-18.38 55.138-2.626 23.63 21.005 81.395 21.005 105.026 0 15.754-13.128 42.01-13.128 55.138 5.251 13.128 15.754 13.128 42.01-5.251 55.139C590.77 512 551.385 525.128 512 525.128z",fill:"currentColor","fill-opacity":"0.9"},null,-1)];const it=O(ot,[["render",function(a,o,i,l,r,c){return e(),t("svg",{class:n(a.classes),style:s(a.style),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",role:"presentation"},st,6)}]]),lt=()=>{const{queryObject:e}=V("house_table"),t=T(),{houseKey:a}=S(t),n=u(!1);return{saveIng:n,saveHouse:async()=>{const o=t.getRooms();if(!o.some((e=>!!e.questionContent.length||!!e.inputContent.length)))return void E.error("请填写内容!");n.value=!0;const s=await e(a.value);s.set("rooms",o),s.save(),setTimeout((()=>{n.value=!1}),550)}}},rt=c({name:"BasicLayoutPage"}),ct=z(c({...rt,setup(o){const{saveIng:s,saveHouse:l}=lt(),{getTitle:c}=T(),{getActionRoomName:v}=L(),b=[{key:"list",name:"列表",icon:nt},{key:"userInfo",name:"我的",icon:it}],k=B(),x=N(),S=u(0),O=u(!0),A=d((()=>!!x&&["list"].includes(x.name))),z=d((()=>x?"details"===x.name?c():"questionPage"===x.name?v():x.meta.title:""));C((()=>k),(()=>{const e=b.some((e=>e.key===k.currentRoute.value.path.replace("/","")));S.value=b.findIndex((e=>e.key===k.currentRoute.value.path.replace("/",""))),O.value=e}),{deep:!0,immediate:!0});const V=e=>{switch(e){case 0:k.push("/list");break;case 1:k.push("/userInfo")}S.value=e},E=()=>{k.back()},R=()=>{k.push("add")};return(o,c)=>{const u=oe,d=se,v=ve,k=f("RouterView"),C=et,x=Ge,B=ne;return e(),y(B,{description:"保存中...",loading:I(s)},{default:p((()=>[I(A)?r("",!0):(e(),y(v,{key:0,title:I(z),"title-position":"center","safe-area-top":""},{left:p((()=>[m(d,{color:"transparent","text-color":"#fff",round:"",text:""},{default:p((()=>[m(u,{name:"chevron-left",size:30,onClick:E})])),_:1})])),right:p((()=>[m(d,{onClick:I(l),loading:I(s)},{default:p((()=>[i(" 保存 ")])),_:1},8,["onClick","loading"])])),_:1},8,["title"])),a("div",{class:n(["main-page",{tabbar:I(A),border:I(O)}])},[o.$route.meta.keepAlive?(e(),y(k,{key:0},{default:p((({Component:t})=>[(e(),y(P,null,[(e(),y(_(t),{key:o.$route.path}))],1024))])),_:1})):r("",!0),o.$route.meta.keepAlive?r("",!0):(e(),y(k,{key:o.$route.path}))],2),g(m(x,{border:"",class:"bottom-navigation-example",active:I(S),"onUpdate:active":c[0]||(c[0]=e=>j(S)?S.value=e:null),onFabClick:R,onChange:V},{fab:p((()=>[m(u,{name:"plus"})])),default:p((()=>[(e(),t($,null,w(b,(e=>m(C,{key:e.key,label:e.name},null,8,["label"]))),64))])),_:1},8,["active"]),[[h,I(A)]])])),_:1},8,["loading"])}}}),[["__scopeId","data-v-54de4719"]]);export{ct as default};
