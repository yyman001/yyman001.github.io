import{_ as e}from"./index-736bb95a.js";import{h as t,A as a,k as s,Z as i,a6 as o,o as n,f as r,w as d,e as f,C as l}from"./index-a6a8f6bb.js";import"./index-85e8a41a.js";import"./index-9368bc96.js";import"./index-8faf922e.js";const m={class:"relative bg-red-600 pdf-container min-h-fit"},u=["src"],c=t({name:"PdfView",__name:"viewPdf",setup(t){const c=a(),{projectId:p}=c.currentRoute.value.query,v=window.location.origin,h=s(`${v}/pdf?id=${p}`),w=s(null),g=()=>{},y=e=>{if(e.origin!==v||"pdf"!==e.data.type)return;const{width:t,height:a}=e.data.data;((e,t)=>{const a=w;if(a.value){a.value.style.height=`${t}px`,a.value.style.width=`${e}px`;const s=(document.body.offsetWidth||0)/e,i=(document.body.offsetHeight||0)/t,o=Math.min(s,i);a.value.style.transform=`scale(${o})`,a.value.style.transformOrigin="top left"}})(t,a)};return i((()=>{window.addEventListener("message",y)})),o((()=>{window.removeEventListener("message",y)})),(t,a)=>(n(),r(e,{title:"PDF 预览"},{default:d((()=>[f("div",m,[f("iframe",{ref_key:"pdfFrame",ref:w,class:"absolute",src:l(h),onLoad:g},null,40,u)])])),_:1}))}});export{c as default};
