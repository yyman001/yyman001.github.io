import{ag as t,k as a,V as e}from"./index-a6a8f6bb.js";const n=(n="test",c=!0)=>{const s=t.Object.extend(n),i=()=>new s,d=async t=>{const a=i();await a.save({...t}),await u()},o=async a=>{const e=i(),n=new t.Query(e);return await n.get(a)},r=async()=>{const a=i(),e=new t.Query(a);e.descending("createdAt"),e.include("children");return(await e.find()).map((t=>t.toJSON()))},y=a([]);e((()=>{c&&u()}));const u=async()=>{y.value=await r()};return{addDoc:d,updateDoc:async t=>{if(!(await o(t.objectId)))return`not find object ${t.objectId}`;await d(t)},queryObject:o,queryAll:r,queryById:async a=>{const e=i(),n=new t.Query(e);n.containedIn("objectId",a),n.include("*");return(await n.find()).map((t=>t.toJSON()))},delFiledAtObject:async t=>{const a=i();a.unset(t),await a.save(),await u()},delObject:async t=>{const a=i();a.id=t,await a.destroy(),await u()},destroy:async()=>{const t=i();await t.destroy()},parseList:y}};export{n as u};
