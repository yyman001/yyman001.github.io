import{_ as e}from"./index-9368bc96.js";import{e as s,c as a,j as r,f as t,k as o,l as n,m as l,q as i,r as u,v as d,w as m,d as c}from"./index-85e8a41a.js";import{u as f,a as p,s as y,_ as h}from"./index-9ba43d71.js";import{l as b}from"./shared-491d6769.js";import{o as v,c as w,a as _,n as x,h as S,i as V,L as j,b as E,w as R,s as T,O as U}from"./index-a6a8f6bb.js";import{_ as k}from"./index-7dda9b71.js";const O={disabled:Boolean,readonly:Boolean,scrollToError:String,scrollToErrorOffsetY:{type:[String,Number],default:0},onSubmit:s(),onReset:s()};var P=(e,s,a)=>new Promise(((r,t)=>{var o=e=>{try{l(a.next(e))}catch(s){t(s)}},n=e=>{try{l(a.throw(e))}catch(s){t(s)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,n);l((a=a.apply(e,s)).next())}));const{name:g,n:B}=a("form");const F=S({name:g,props:O,setup(e){const s=V((()=>e.disabled)),a=V((()=>e.readonly)),{formItems:d,bindFormItems:m}=f();function c(){return P(this,null,(function*(){var s;const a=yield Promise.all(d.map((({validate:e})=>e())));if(e.scrollToError){const[,r]=o(a,(e=>!1===e),e.scrollToError),t=r>-1;if(t){!function(s){setTimeout((()=>{const a=n(s),r=a===window?0:l(a),t=l(s)-r-i(e.scrollToErrorOffsetY);u(a,{top:t,animation:b})}),300)}(null==(s=d[r].instance.proxy)?void 0:s.$el)}return!t}return a.every((e=>!0===e))}))}function p(){return d.forEach((({reset:e})=>e()))}return m({disabled:s,readonly:a}),{n:B,handleSubmit:function(s){return P(this,null,(function*(){r(s);const a=yield c();t(e.onSubmit,a)}))},handleReset:function(s){r(s),p(),t(e.onReset)},validate:c,reset:p,resetValidation:function(){return d.forEach((({resetValidation:e})=>e()))}}}});F.render=function(e,s){return v(),w("form",{class:x(e.n()),onSubmit:s[0]||(s[0]=(...s)=>e.handleSubmit&&e.handleSubmit(...s)),onReset:s[1]||(s[1]=(...s)=>e.handleReset&&e.handleReset(...s))},[_(e.$slots,"default")],34)};var I=F;I.useValidation=d,I.useForm=p,m(I),c(I,O);const Y=I,$={class:"block p-2"},q=S({__name:"addUser",setup(s){const a=U(),r=j({username:"",password:""});function t(e){e&&a.addUser(r)}function o(){y.success("重置成功!")}return(s,a)=>{const n=h,l=e,i=k,u=Y;return v(),w("div",$,[E(u,{onSubmit:t,onReset:o},{default:R((()=>[E(i,{direction:"column",size:[14,0]},{default:R((()=>[E(n,{placeholder:"请输入用户名",rules:[e=>!!e||"用户名不能为空"],modelValue:r.username,"onUpdate:modelValue":a[0]||(a[0]=e=>r.username=e)},null,8,["rules","modelValue"]),E(n,{type:"password",placeholder:"请输入密码",rules:[e=>!!e||"密码不能为空"],modelValue:r.password,"onUpdate:modelValue":a[1]||(a[1]=e=>r.password=e)},null,8,["rules","modelValue"]),E(i,{justify:"center"},{default:R((()=>[E(l,{type:"primary","native-type":"reset"},{default:R((()=>[T(" 清空 ")])),_:1}),E(l,{type:"primary","native-type":"submit"},{default:R((()=>[T(" 提交 ")])),_:1})])),_:1})])),_:1})])),_:1})])}}});export{q as default};
