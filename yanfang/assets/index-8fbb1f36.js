import{e,c as n,D as o,h as r,E as t,F as s,G as a,z as i,H as l,I as u,w as c,a as d}from"./index-2de332e8.js";import{u as m,a as f}from"./index-2265487e.js";import{o as h,c as p,r as b,n as v,f as y,h as E}from"./index-330ef47a.js";const S=e=>e,x={disabled:Boolean,readonly:Boolean,scrollToError:String,scrollToErrorOffsetY:{type:[String,Number],default:0},onSubmit:e(),onReset:e()};var R=(e,n,o)=>new Promise(((r,t)=>{var s=e=>{try{i(o.next(e))}catch(n){t(n)}},a=e=>{try{i(o.throw(e))}catch(n){t(n)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(s,a);i((o=o.apply(e,n)).next())}));const{name:T,n:w}=n("form");const j=y({name:T,props:x,setup(e){const n=E((()=>e.disabled)),u=E((()=>e.readonly)),{formItems:c,bindFormItems:d}=m();function f(){return R(this,null,(function*(){var n;const o=yield Promise.all(c.map((({validate:e})=>e())));if(e.scrollToError){const[,r]=t(o,(e=>!1===e),e.scrollToError),u=r>-1;if(u){!function(n){setTimeout((()=>{const o=s(n),r=o===window?0:a(o),t=a(n)-r-i(e.scrollToErrorOffsetY);l(o,{top:t,animation:S})}),300)}(null==(n=c[r].instance.proxy)?void 0:n.$el)}return!u}return o.every((e=>!0===e))}))}function h(){return c.forEach((({reset:e})=>e()))}return d({disabled:n,readonly:u}),{n:w,handleSubmit:function(n){return R(this,null,(function*(){o(n);const t=yield f();r(e.onSubmit,t)}))},handleReset:function(n){o(n),h(),r(e.onReset)},validate:f,reset:h,resetValidation:function(){return c.forEach((({resetValidation:e})=>e()))}}}});j.render=function(e,n){return h(),p("form",{class:v(e.n()),onSubmit:n[0]||(n[0]=(...n)=>e.handleSubmit&&e.handleSubmit(...n)),onReset:n[1]||(n[1]=(...n)=>e.handleReset&&e.handleReset(...n))},[b(e.$slots,"default")],34)};var F=j;F.useValidation=u,F.useForm=f,c(F),d(F,x);const I=F;export{I as _};
