(function($){var opts={container:".section",slow:false,slowtime:50,setRem:true,setWidth:true,maxWidth:800,maxRadio:1.575,minRadio:1.575,radio:1.575,resize:true,fullpage:false,autoHeight:false};var loadOptions=window.loadOptions||{};$.extend(opts,loadOptions);$.fn.extend({loading:function(options){return this.each(function(){var imgs=new Array();var img=new Array();var opt={onload:null,complete:null};$.extend(opt,opts,options);$(this).find("img").each(function(){if($(this).attr("src")){imgs.push($(this).attr("src"))}});$(this).find("*").each(function(){var bgimg=$(this).css("background-image");if(bgimg&&bgimg!="none"){bgimg=bgimg.replace(/[\( \")]/g,"").replace(/url/g,"");var bgimgs=bgimg.split(",");for(var i=0;i<bgimgs.length;i++){imgs.push(bgimgs[i])}}});var length=imgs.length;var temp={};for(var i=0;i<length;i++){var tmp=imgs[i];if(!temp.hasOwnProperty(tmp)){temp[imgs[i]]="yes"}}length=0;imgs=[];for(var i in temp){imgs[length++]=i}var num=length;var pre=100;if(length>0){pre=1-num/length;for(var i=0;i<length;i++){(function(i){img[i]=new Image();img[i].onerror=img[i].onload=function(){num--;var pre=Math.round((1-num/length)*100);var outtime=0;if(opt.slow){outtime=(length-num)*opt.slowtime}if(typeof opt.onload=="function"){(function(obj,pre,outtime){setTimeout(function(){opt.onload.call(obj,pre)},outtime)})(this,pre,outtime)}if(num==0){if(typeof opt.complete=="function"){if(opt.slow){outtime+=opt.slowtime}(function(obj,pre,outtime){setTimeout(function(){opt.complete.call(obj,pre)},outtime)})(this,pre,outtime)}}this.onload=null};img[i].src=imgs[i]})(i)}}else{if(typeof opt.complete=="function"){opt.complete.call(this,pre)}}})},setRem:function(maxWidth){return this.each(function(){var sw=$(this).width();var radio=sw/maxWidth>1?1:sw/maxWidth;var bSize=radio*100;var perSize=bSize+"px";$("html").css("font-size",perSize)})},setWidth:function(opts){return this.each(function(){var width=$(window).width();var height=$(window).height();if(width>opts.maxWidth){width=opts.maxWidth
}var radio=(height/width)<opts.minRadio?opts.minRadio:(height/width);var setwidth=Math.ceil(height/radio);if(radio<=opts.maxRadio){if(opts.autoHeight){$(this).css({maxWidth:setwidth+"px",minWidth:setwidth+"px",height:height+(setwidth*(opts.maxRadio-radio))/2,marginTop:-(setwidth*(opts.maxRadio-radio))/2+"px"});if(radio<(opts.maxRadio+opts.minRadio)/2){$(this).removeClass("max_margin").addClass("min_margin")}else{$(this).removeClass("min_margin").addClass("max_margin")}}else{$(this).css({maxWidth:setwidth+"px",height:height})}if(opts.fullpage){var active=$(".fullpage-wrapper").find(".active");var fullheight=active.height()*active.index();$(".fullpage-wrapper").css({WebkitTransform:"translate3d(0px, -"+fullheight+"px, 0px)",transform:"translate3d(0px, -"+fullheight+"px, 0px)",WebkitTransition:"all 0s ease",transition:"all 0s ease"});$(".fp-tableCell,.fp-table").css({maxWidth:setwidth+"px",height:height})}}else{if(opts.autoHeight){$(this).css({maxWidth:"none",minWidth:width+"px",height:height,marginTop:"0px"}).removeClass("max_margin min_margin")}else{$(this).css({maxWidth:"none",height:height})}if(opts.fullpage){var active=$(".fullpage-wrapper").find(".active");var fullheight=active.height()*active.index();$(".fullpage-wrapper").css({WebkitTransform:"translate3d(0px, -"+fullheight+"px, 0px)",transform:"translate3d(0px, -"+fullheight+"px, 0px)",WebkitTransition:"all 0s ease",transition:"all 0s ease"});$(".fp-tableCell,.fp-table").css({maxWidth:"none",height:height})}}})}});if(opts.setWidth){$(opts.container).setWidth(opts)}if(opts.setRem){$(opts.container).eq(0).setRem(opts.maxWidth)}if(opts.resize){var o=navigator.userAgent;var isPC=true;if(o.indexOf("iPhone")!=-1||o.indexOf("iPad")!=-1||o.indexOf("iPod")!=-1||o.indexOf("Android")!=-1||o.indexOf("SymbianOS")!=-1||o.indexOf("Windows Phone")!=-1){isPC=false}$(window).resize(function(e){if(isPC||(!isPC&&!(document.activeElement&&(document.activeElement.type=="text"||document.activeElement.type=="textarea")))){if(opts.setWidth){$(opts.container).setWidth(opts)
}if(opts.setRem){$(opts.container).eq(0).setRem(opts.maxWidth)}}})}})(jQuery);
